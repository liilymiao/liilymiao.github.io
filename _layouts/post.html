---
layout: default
---
<article class="post">
  <!-- 标题：默认英文，JS 根据语言切换 -->
  <h1 id="postTitle"
      data-title-zh="{{ page.title | escape }}"
      data-title-en="{{ page.title_en | default: page.title | escape }}">
    {{ page.title_en | default: page.title }}
  </h1>

  {% if page.date %}
  <p class="post-meta">
    <small>{{ page.date | date: "%Y-%m-%d %H:%M" }}</small>
    {%- if page.categories and page.categories != empty -%}
      · <small>{{ page.categories | join: ", " }}</small>
    {%- endif -%}
  </p>
  {% endif %}

  <!-- 正文：英文为默认（Markdown 原文），中文在 body_zh -->
  <div class="post-body" data-lang="en">
    {{ content }}
  </div>

  {% if page.body_zh %}
  <div class="post-body" data-lang="zh" style="display:none">
    {{ page.body_zh | markdownify }}
  </div>
  {% endif %}
</article>

<script>
(function(){
  const STORE = 'lang';
  const titleEl = document.getElementById('postTitle');
  const blocks  = document.querySelectorAll('.post-body[data-lang]');

  function apply(lang){
    // 标题切换
    if (titleEl){
      const zh = titleEl.dataset.titleZh;
      const en = titleEl.dataset.titleEn || zh || titleEl.textContent;
      titleEl.textContent = (lang === 'zh') ? (zh || en) : (en || zh);
    }
    // 正文切换（无中文时始终显示英文）
    let hasZh = false;
    blocks.forEach(b => { if (b.dataset.lang === 'zh') hasZh = true; });
    blocks.forEach(b => {
      const want = (lang === 'zh' && hasZh) ? 'zh' : 'en';
      b.style.display = (b.dataset.lang === want) ? '' : 'none';
    });
  }

  const saved = localStorage.getItem(STORE) || 'en';
  apply(saved);
  window.addEventListener('langchange', e => apply(e.detail || 'en'));
})();
</script>

{% if page.comments != false %}
<section id="comments" class="comments">
  <h2>Comments</h2>
  <div id="giscus_container"></div>

<script src="https://giscus.app/client.js"
        data-repo="liilymiao/liilymiao.github.io"
        data-repo-id="R_kgDOQSaSGw"
        data-category="[ENTER CATEGORY NAME HERE]"
        data-category-id="[ENTER CATEGORY ID HERE]"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script> 

  <noscript>Please enable JavaScript to view comments powered by giscus.</noscript>
</section>
{% endif %}